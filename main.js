!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",modalSpan:".modal__span"};class t{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupOutside=this._closePopupOutside.bind(this),this._closeButton=this._popupElement.querySelector(".modal__close"),this._modalButton=this._popupElement.querySelector(".modal__button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._closePopupOutside)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._closePopupOutside)}_handleEscClose(e){"Escape"===e.key&&this.close()}_closePopupOutside(e){e.target===this._popupElement&&this.close()}renderLoading(e){this._modalButton.textContent=e}setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close()))}}class s extends t{constructor(e,t){super(e),this._submitButton=this._popupElement.querySelector(".modal__button"),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}_handleSubmit=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close(),this._popupForm.reset()};setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._handleSubmit)}}class i{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class n{constructor(e,t,s,i,n){this._data=e,this.isLiked=e.isLiked,this.id=e._id,this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteButton=i,this._handleLikeButton=n}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeButton(this))),this._deleteButton.addEventListener("click",(()=>this._handleDeleteButton(this))),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this._link,this._name)}))}_handleLikes(){this.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}handleIsLiked(e){this.isLiked=e,this._handleLikes()}deleteCard(){this._cardElement.remove(),this._element=null}getCardElement(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._setEventListeners(),this._handleLikes(),this._cardElement}}var r=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._modalSpan=e.modalSpan,this._form=t}_resetSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass)}hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t&&(t.textContent="",t.classList.remove(this._inputErrorClass))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t&&(t.textContent=e.validationMessage,t.classList.add(this._errorClass))}toggleButtonState(){this._isFormValid()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_isFormValid(){return this._inputEls.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this.hideInputError(e):this._showInputError(e)}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this.hideInputError(e)})),this.toggleButtonState()}};const o=document.getElementById("avatar-button"),l=document.getElementById("profile-edit-button"),a=document.getElementById("profile-add-button"),d=document.getElementById("profile-image-modal"),h=document.getElementById("profile-title-input"),c=document.getElementById("profile-description-input"),u=document.forms["profile-image-form"],_=document.forms["profile-form"],m=document.forms["add-card-form"],p=new class extends t{constructor(e){super(e),this._imageElement=this._popupElement.querySelector(".modal__preview-image"),this._captionElement=this._popupElement.querySelector(".modal__image-text")}open(e){let{name:t,link:s}=e;this._imageElement.src=s,this._imageElement.alt=t,this._captionElement.textContent=t,super.open()}}("#image-modal");p.setEventListeners();const E=new class extends t{constructor(e){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._popupDeleteButton=this._popupElement.querySelector(".modal__button")}handleDelete(e){this._handleDeleteSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleDeleteSubmit()}))}}("#delete-card-modal");E.setEventListeners();const v=new s("#profile-edit-modal",(e=>{var t;t=e,v.renderLoading("Saving..."),g.updateUserInfo(t).then((e=>{b.setUserInfo(e),q.resetValidation()})).catch((e=>{console.log(`Unable to process request, ${e}`)})).finally((()=>{v.close(),v.renderLoading("Save")}))}));v.setEventListeners();const g=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>this._handleResponse(e)))}updateUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:`${e.name}`,about:`${e.description}`})}).then((e=>this._handleResponse(e)))}updateProfileImage(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>this._handleResponse(e)))}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._handleResponse(e)))}createCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",body:JSON.stringify({name:`${e.title}`,link:`${e.url}`}),headers:this._headers}).then((e=>this._handleResponse(e)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._handleResponse(e)))}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then((e=>this._handleResponse(e)))}deleteLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then((e=>this._handleResponse(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"2db58c83-3523-4135-8564-2660432887a4","Content-Type":"application/json"}}),b=new class{constructor(e){let{titleSelector:t,descriptionSelector:s,profileImage:i}=e;this._titleElement=document.querySelector(t),this._descriptionElement=document.querySelector(s),this._imageSelector=document.querySelector(i)}getUserInfo(){return{name:this._titleElement.textContent,about:this._descriptionElement.textContent}}setUserInfo(e){this._titleElement.textContent=e.name,this._descriptionElement.textContent=e.about}setProfileImage(e){this._imageSelector.src=e.avatar}}({titleSelector:".profile__title",descriptionSelector:".profile__description",profileImage:".profile__image"}),f=new s("#add-card-modal",(e=>{var t;t=e,f.renderLoading("Loading..."),g.createCard(t).then((e=>{k(e),f.close(),U.resetValidation()})).finally((()=>{f.renderLoading("Save")}))}));f.setEventListeners();const L=new s("#profile-image-modal",(e=>{var t;t=e.url,L.renderLoading("Loading..."),g.updateProfileImage(t).then((e=>{b.setProfileImage(e),L.close(),u.resetValidation(),B.disableSubmit()})).catch((e=>{console.log(`Unable to process request, ${e}`)})).finally((()=>{L.renderLoading("Save")}))}));let S;function k(e){const t=function(e){return new n(e,"#card-template",y,I,C).getCardElement()}(e);S.addItem(t)}function y(e,t){p.open({name:t,link:e})}function I(e){E.open(),E.handleDelete((()=>{E.renderLoading("Saving..."),g.deleteCard(e.id).then((()=>{e.deleteCard()})).catch((e=>{console.log(`Unable to process request, ${e}`)})).finally((()=>{E.close(),E.renderLoading("Yes")}))}))}function C(e){e.isLiked&&g.deleteLike(e.id).then((()=>{e.handleIsLiked(!1)})).catch((e=>{console.log(`Unable to process request, ${e}`)})),e.isLiked||g.likeCard(e.id).then((()=>{e.handleIsLiked(!0)})).catch((e=>{console.log(`Unable to process request, ${e}`)}))}L.setEventListeners(),l.addEventListener("click",(()=>{q.hideInputError(_);const{name:e,about:t}=b.getUserInfo();h.value=e,c.value=t,v.open(),q.resetValidation()})),d.addEventListener("click",(()=>{q.hideInputError(u);const{url:e}=b.getUserInfo()})),a.addEventListener("click",(()=>{f.open(),U.resetValidation()})),o.addEventListener("click",(()=>{L.open()})),g.getUserInfo().then((e=>{b.setProfileImage(e),b.setUserInfo({name:e.name,about:e.about})})).catch((e=>{console.log(`Unable to process request, ${e}`)})),g.getInitialCards().then((e=>{S=new i({items:e,renderer:e=>{k(e)}},".cards__list"),S.renderItems(e)})).catch((e=>{console.log(`Unable to process request, ${e}`)}));const B=new r(e,u),q=new r(e,_),U=new r(e,m);q.enableValidation(),U.enableValidation(),B.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SixFQUFTNUosS0FDZjZILE1BQU8rQixFQUFTL0IsT0FDaEIsSUFFSHJCLE9BQU9DLElBQ05DLFFBQVFDLElBQUksOEJBQThCRixJQUFNLElBR3BEUixFQUNHaUMsa0JBQ0EvQixNQUFNMEQsSUFDTEosRUFBYyxJQUFJcEosRUFDaEIsQ0FDRUcsTUFBT3FKLEVBQ1BwSixTQUFXaUosSUFDVFAsRUFBV08sRUFBUyxHQUd4QixnQkFFRkQsRUFBWTVJLFlBQVlnSixFQUFNLElBRS9CckQsT0FBT0MsSUFDTkMsUUFBUUMsSUFBSSw4QkFBOEJGLElBQU0sSUFJcEQsTUFBTThDLEVBQXdCLElBQUlPLEVBQWM3TSxFQUFRaUksR0FDbERxQixFQUF1QixJQUFJdUQsRUFBYzdNLEVBQVFtSSxHQUNqRGdFLEVBQW1CLElBQUlVLEVBQWM3TSxFQUFRb0ksR0FFbkRrQixFQUFxQjlCLG1CQUNyQjJFLEVBQWlCM0UsbUJBQ2pCOEUsRUFBc0I5RSxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBEZWxldGVDYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbiAgbW9kYWxTcGFuOiBcIi5tb2RhbF9fc3BhblwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fY2xvc2VQb3B1cE91dHNpZGUgPSB0aGlzLl9jbG9zZVBvcHVwT3V0c2lkZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIHRoaXMuX21vZGFsQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2Nsb3NlUG9wdXBPdXRzaWRlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwibW91c2Vkb3duXCIsXG4gICAgICB0aGlzLl9jbG9zZVBvcHVwT3V0c2lkZVxuICAgICk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBfY2xvc2VQb3B1cE91dHNpZGUoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyTG9hZGluZyhidXR0b25UZXh0KSB7XG4gICAgdGhpcy5fbW9kYWxCdXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG5cbiAgX2hhbmRsZVN1Ym1pdCA9IChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUJ1dHRvbixcbiAgICBoYW5kbGVMaWtlQnV0dG9uXG4gICkge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuaXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcbiAgICB0aGlzLmlkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24gPSBoYW5kbGVEZWxldGVCdXR0b247XG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b247XG4gIH1cbiAgLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbiAgLy8gISB8fCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50TGlzdGVuZXJzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcbiAgLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24odGhpcylcbiAgICApO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbih0aGlzKVxuICAgICk7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuICAvLyAhIHx8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fFxuICAvLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuXG4gIF9oYW5kbGVMaWtlcygpIHtcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoYGNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoYGNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZWApO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUlzTGlrZWQoaXNMaWtlZCkge1xuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgdGhpcy5faGFuZGxlTGlrZXMoKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICAvLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuICAvLyAhIHx8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXR1cm5DYXJkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fFxuICAvLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuICBnZXRDYXJkRWxlbWVudCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fbW9kYWxTcGFuID0gc2V0dGluZ3MubW9kYWxTcGFuO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9yZXNldFN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxuXG4gIGhpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBpZiAoZXJyb3JNZXNzYWdlRWwpIHtcbiAgICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGlmIChlcnJvck1lc3NhZ2VFbCkge1xuICAgICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBjb25zdCBpc0Zvcm1WYWxpZFJlc3VsdCA9IHRoaXMuX2lzRm9ybVZhbGlkKCk7XG5cbiAgICBpZiAoIWlzRm9ybVZhbGlkUmVzdWx0KSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX2lzRm9ybVZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHRoaXMuaGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSk7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJpbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IFBvcHVwRGVsZXRlQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cERlbGV0ZUNhcmQuanNcIjtcblxuY29uc3QgcHJvZmlsZUltYWdlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXZhdGFyLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1pbWFnZS1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgXCJwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbmNvbnN0IHByb2ZpbGVJbWFnZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtaW1hZ2UtZm9ybVwiXTtcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdO1xuY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGRlbGV0ZUltYWdlTW9kYWwgPSBuZXcgUG9wdXBEZWxldGVDYXJkKFwiI2RlbGV0ZS1jYXJkLW1vZGFsXCIpO1xuZGVsZXRlSW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICAoZm9ybURhdGEpID0+IHtcbiAgICBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChmb3JtRGF0YSk7XG4gIH1cbik7XG5wcm9maWxlRWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vRGVjbGFyZSBBUEkgY2xhc3M6XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjJkYjU4YzgzLTM1MjMtNDEzNS04NTY0LTI2NjA0MzI4ODdhNFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8vRGVjbGFyZSBVc2VySW5mbyBDbGFzczpcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbiAgcHJvZmlsZUltYWdlOiBcIi5wcm9maWxlX19pbWFnZVwiLFxufSk7XG5cbi8vRGVjbGFyZSBQb3B1cFdpdGhGb3JtIGZvciBhZGRDYXJkTW9kYWw6XG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCAoZm9ybURhdGEpID0+IHtcbiAgaGFuZGxlQWRkQ2FyZFN1Ym1pdChmb3JtRGF0YSk7XG59KTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL2RlY2xhcmUgRWRpdCBJbWFnZSBNb2RhbFxuY29uc3QgcHJvZmlsZUltYWdlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1pbWFnZS1tb2RhbFwiLFxuICAoZm9ybURhdGEpID0+IHtcbiAgICBoYW5kbGVDaGFuZ2VQcm9maWxlUGljdHVyZShmb3JtRGF0YS51cmwpO1xuICB9XG4pO1xucHJvZmlsZUltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9EZWNsYXJlIFNlY3Rpb24gZm9yIEluaXRpYWwgQ2FyZHNcbmxldCBjYXJkU2VjdGlvbjtcblxuLy9SZW5kZXJDYXJkRnVuY3Rpb25cbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xufVxuLy9DcmVhdGUgQ2FyZCBGdW5jdGlvblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQnV0dG9uLFxuICAgIGhhbmRsZUxpa2VCdXR0b25cbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2V0Q2FyZEVsZW1lbnQoKTtcbn1cbi8vQ2xpY2sgQ2FyZCBGdW5jdGlvblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhsaW5rLCBuYW1lKSB7XG4gIHBvcHVwV2l0aEltYWdlLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBwcm9maWxlRWRpdE1vZGFsLnJlbmRlckxvYWRpbmcoXCJTYXZpbmcuLi5cIik7XG4gIGFwaVxuICAgIC51cGRhdGVVc2VySW5mbyhpbnB1dFZhbHVlcylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xuICAgICAgcHJvZmlsZUVkaXRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYFVuYWJsZSB0byBwcm9jZXNzIHJlcXVlc3QsICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcHJvZmlsZUVkaXRNb2RhbC5jbG9zZSgpO1xuICAgICAgcHJvZmlsZUVkaXRNb2RhbC5yZW5kZXJMb2FkaW5nKFwiU2F2ZVwiKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhcIkxvYWRpbmcuLi5cIik7XG4gIGFwaVxuICAgIC5jcmVhdGVDYXJkKGlucHV0VmFsdWVzKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHJlbmRlckNhcmQocmVzKTtcbiAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuICAgICAgYWRkQ2FyZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKFwiU2F2ZVwiKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQnV0dG9uKGNhcmQpIHtcbiAgZGVsZXRlSW1hZ2VNb2RhbC5vcGVuKCk7XG4gIGRlbGV0ZUltYWdlTW9kYWwuaGFuZGxlRGVsZXRlKCgpID0+IHtcbiAgICBkZWxldGVJbWFnZU1vZGFsLnJlbmRlckxvYWRpbmcoXCJTYXZpbmcuLi5cIik7XG4gICAgYXBpXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkLmlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgVW5hYmxlIHRvIHByb2Nlc3MgcmVxdWVzdCwgJHtlcnJ9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBkZWxldGVJbWFnZU1vZGFsLmNsb3NlKCk7XG4gICAgICAgIGRlbGV0ZUltYWdlTW9kYWwucmVuZGVyTG9hZGluZyhcIlllc1wiKTtcbiAgICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGlrZUJ1dHRvbihjYXJkKSB7XG4gIGlmIChjYXJkLmlzTGlrZWQpIHtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVMaWtlKGNhcmQuaWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQuaGFuZGxlSXNMaWtlZChmYWxzZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFVuYWJsZSB0byBwcm9jZXNzIHJlcXVlc3QsICR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH1cbiAgaWYgKCFjYXJkLmlzTGlrZWQpIHtcbiAgICBhcGlcbiAgICAgIC5saWtlQ2FyZChjYXJkLmlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLmhhbmRsZUlzTGlrZWQodHJ1ZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFVuYWJsZSB0byBwcm9jZXNzIHJlcXVlc3QsICR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2hhbmdlUHJvZmlsZVBpY3R1cmUoaW5wdXRVcmwpIHtcbiAgcHJvZmlsZUltYWdlTW9kYWwucmVuZGVyTG9hZGluZyhcIkxvYWRpbmcuLi5cIik7XG4gIGFwaVxuICAgIC51cGRhdGVQcm9maWxlSW1hZ2UoaW5wdXRVcmwpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlckluZm8uc2V0UHJvZmlsZUltYWdlKHJlcyk7XG4gICAgICBwcm9maWxlSW1hZ2VNb2RhbC5jbG9zZSgpO1xuICAgICAgcHJvZmlsZUltYWdlRm9ybS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICAgIHByb2ZpbGVJbWFnZVZhbGlkYXRvci5kaXNhYmxlU3VibWl0KCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYFVuYWJsZSB0byBwcm9jZXNzIHJlcXVlc3QsICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcHJvZmlsZUltYWdlTW9kYWwucmVuZGVyTG9hZGluZyhcIlNhdmVcIik7XG4gICAgfSk7XG59XG5cbi8vUHJvZmlsZUVkaXRCdXR0b25FdmVudExpc3RlbmVyc1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZUVkaXRWYWxpZGF0b3IuaGlkZUlucHV0RXJyb3IocHJvZmlsZUVkaXRGb3JtKTtcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBuYW1lO1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGFib3V0O1xuICBwcm9maWxlRWRpdE1vZGFsLm9wZW4oKTtcbiAgcHJvZmlsZUVkaXRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcbi8vUHJvZmlsZUVkaXRJbWFnZUV2ZW50TGlzdGVuZXJzXG5wcm9maWxlRWRpdEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVFZGl0VmFsaWRhdG9yLmhpZGVJbnB1dEVycm9yKHByb2ZpbGVJbWFnZUZvcm0pO1xuICBjb25zdCB7IHVybCB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbn0pO1xuLy9BZGQgQ2FyZCBCdXR0b24gRXZlbnQgTGlzdGVuZXJzXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG4gIGFkZENhcmRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxucHJvZmlsZUltYWdlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlSW1hZ2VNb2RhbC5vcGVuKCk7XG59KTtcblxuYXBpXG4gIC5nZXRVc2VySW5mbygpXG4gIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFByb2ZpbGVJbWFnZSh1c2VyRGF0YSk7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgIGFib3V0OiB1c2VyRGF0YS5hYm91dCxcbiAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgVW5hYmxlIHRvIHByb2Nlc3MgcmVxdWVzdCwgJHtlcnJ9YCk7XG4gIH0pO1xuXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChjYXJkcykgPT4ge1xuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgICAgIHJlbmRlckNhcmQoY2FyZERhdGEpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIFwiLmNhcmRzX19saXN0XCJcbiAgICApO1xuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgVW5hYmxlIHRvIHByb2Nlc3MgcmVxdWVzdCwgJHtlcnJ9YCk7XG4gIH0pO1xuXG4vLyBGb3JtIFZhbGlkYXRvcnNcbmNvbnN0IHByb2ZpbGVJbWFnZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUltYWdlRm9ybSk7XG5jb25zdCBwcm9maWxlRWRpdFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcbmNvbnN0IGFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtRWxlbWVudCk7XG5cbnByb2ZpbGVFZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZENhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xucHJvZmlsZUltYWdlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIlxuICAgICk7XG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQgPVxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXRleHRcIik7XG4gIH1cbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX2NhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBEZWxldGVDYXJkIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9wb3B1cERlbGV0ZUJ1dHRvbiA9XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGUoaGFuZGxlRGVsZXRlU3VibWl0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVTdWJtaXQgPSBoYW5kbGVEZWxldGVTdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW5mbyhmb3JtRGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGAke2Zvcm1EYXRhLm5hbWV9YCxcclxuICAgICAgICBhYm91dDogYCR7Zm9ybURhdGEuZGVzY3JpcHRpb259YCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVJbWFnZSh1cmwpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiB1cmwsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoc2FtcGxlQ2FyZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogYCR7c2FtcGxlQ2FyZC50aXRsZX1gLFxyXG4gICAgICAgIGxpbms6IGAke3NhbXBsZUNhcmQudXJsfWAsXHJcbiAgICAgIH0pLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgdGl0bGVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciwgcHJvZmlsZUltYWdlIH0pIHtcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2VTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUltYWdlKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhpbnB1dFZhbHVlcykge1xuICAgIHRoaXMuX3RpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0VmFsdWVzLm5hbWU7XG5cbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlcy5hYm91dDtcbiAgfVxuICBzZXRQcm9maWxlSW1hZ2UoaW1hZ2UpIHtcbiAgICB0aGlzLl9pbWFnZVNlbGVjdG9yLnNyYyA9IGltYWdlLmF2YXRhcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwibW9kYWxTcGFuIiwiUG9wdXAiLCJjb25zdHJ1Y3RvciIsInBvcHVwU2VsZWN0b3IiLCJ0aGlzIiwiX3BvcHVwRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfY2xvc2VQb3B1cE91dHNpZGUiLCJfY2xvc2VCdXR0b24iLCJfbW9kYWxCdXR0b24iLCJvcGVuIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsImUiLCJ0YXJnZXQiLCJyZW5kZXJMb2FkaW5nIiwiYnV0dG9uVGV4dCIsInRleHRDb250ZW50Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3N1Ym1pdEJ1dHRvbiIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsIl9oYW5kbGVTdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQnV0dG9uIiwiaGFuZGxlTGlrZUJ1dHRvbiIsIl9kYXRhIiwiaXNMaWtlZCIsImlkIiwiX2lkIiwiX25hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfY2FyZEltYWdlRWwiLCJfaGFuZGxlTGlrZXMiLCJoYW5kbGVJc0xpa2VkIiwiZGVsZXRlQ2FyZCIsIl9jYXJkRWxlbWVudCIsIl9lbGVtZW50IiwiZ2V0Q2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsIiwic3JjIiwiYWx0Iiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfbW9kYWxTcGFuIiwiX2Zvcm0iLCJfcmVzZXRTdWJtaXRCdXR0b24iLCJoaWRlSW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaXNGb3JtVmFsaWQiLCJkaXNhYmxlZCIsIl9pbnB1dEVscyIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwicHJvZmlsZUltYWdlRWRpdEJ1dHRvbiIsImdldEVsZW1lbnRCeUlkIiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZUVkaXRJbWFnZSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlSW1hZ2VGb3JtIiwiZm9ybXMiLCJwcm9maWxlRWRpdEZvcm0iLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJwb3B1cFdpdGhJbWFnZSIsIl9pbWFnZUVsZW1lbnQiLCJfY2FwdGlvbkVsZW1lbnQiLCJkZWxldGVJbWFnZU1vZGFsIiwiX3BvcHVwRGVsZXRlQnV0dG9uIiwiaGFuZGxlRGVsZXRlIiwiaGFuZGxlRGVsZXRlU3VibWl0IiwiX2hhbmRsZURlbGV0ZVN1Ym1pdCIsInByb2ZpbGVFZGl0TW9kYWwiLCJmb3JtRGF0YSIsImlucHV0VmFsdWVzIiwiYXBpIiwidXBkYXRlVXNlckluZm8iLCJ0aGVuIiwicmVzIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInByb2ZpbGVFZGl0VmFsaWRhdG9yIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImRlc2NyaXB0aW9uIiwidXBkYXRlUHJvZmlsZUltYWdlIiwidXJsIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwiY3JlYXRlQ2FyZCIsInNhbXBsZUNhcmQiLCJ0aXRsZSIsImNhcmRJZCIsImxpa2VDYXJkIiwiZGVsZXRlTGlrZSIsImF1dGhvcml6YXRpb24iLCJ0aXRsZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsInByb2ZpbGVJbWFnZSIsIl90aXRsZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiX2ltYWdlU2VsZWN0b3IiLCJzZXRQcm9maWxlSW1hZ2UiLCJpbWFnZSIsImFkZENhcmRQb3B1cCIsInJlbmRlckNhcmQiLCJhZGRDYXJkVmFsaWRhdG9yIiwicHJvZmlsZUltYWdlTW9kYWwiLCJpbnB1dFVybCIsInByb2ZpbGVJbWFnZVZhbGlkYXRvciIsImRpc2FibGVTdWJtaXQiLCJjYXJkU2VjdGlvbiIsImNhcmREYXRhIiwiY2FyZCIsInVzZXJEYXRhIiwiY2FyZHMiLCJGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==